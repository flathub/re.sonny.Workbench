{
  "id": "re.sonny.Workbench",
  "runtime": "org.gnome.Sdk",
  "runtime-version": "44",
  "sdk": "org.gnome.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.vala"
  ],
  "build-options": {
    "append-path": "/usr/lib/sdk/vala/bin",
    "append-ld-library-path": "/usr/lib/sdk/vala/lib"
  },
  "command": "workbench",
  "finish-args": [
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--device=dri",
    "--share=network"
  ],
  "modules": [
    {
      "name": "vte",
      "buildsystem": "meson",
      "config-opts": [
        "-Ddocs=false",
        "-Dgtk3=false",
        "-Dgtk4=true",
        "-Dvapi=false",
        "-Dglade=false"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/vte/0.72/vte-0.72.0.tar.xz",
          "sha256": "40fe914d6c70db34176c922725b6c6ea15d5f3cb2a9b44c57e200a5f950a6736"
        }
      ]
    },
    {
      "name": "libportal",
      "buildsystem": "meson",
      "config-opts": [
        "-Ddocs=false",
        "-Dvapi=false",
        "-Dbackends=gtk4"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/flatpak/libportal/releases/download/0.6/libportal-0.6.tar.xz",
          "sha256": "88a12c3ba71bc31acff7238c280de697d609cebc50830c3766776ec35abc6566"
        }
      ]
    },
    {
      "name": "blueprint-compiler",
      "buildsystem": "meson",
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/jwestman/blueprint-compiler.git",
          "commit": "bc605c5df86a33ff415f627ab1aa8cca53780c81"
        }
      ]
    },
    {
      "name": "vls",
      "buildsystem": "meson",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/vala-lang/vala-language-server/releases/download/0.48.7/vala-language-server-0.48.7.tar.xz",
          "sha256": "a93e09497738144792466d0c5ccb1347583d84a9987b65b08f6aa5d5a1e3f431"
        }
      ],
      "modules": [
        {
          "name": "jsonrpc",
          "buildsystem": "meson",
          "sources": [
            {
              "type": "archive",
              "url": "https://download.gnome.org/sources/jsonrpc-glib/3.44/jsonrpc-glib-3.44.0.tar.xz",
              "sha256": "69406a0250d0cc5175408cae7eca80c0c6bfaefc4ae1830b354c0433bcd5ce06"
            }
          ],
          "cleanup": [
            "/include",
            "*.pc",
            "*.gir",
            "*.typelib"
          ]
        },
        {
          "name": "gee",
          "buildsystem": "autotools",
          "sources": [
            {
              "type": "archive",
              "url": "https://download.gnome.org/sources/libgee/0.20/libgee-0.20.6.tar.xz",
              "sha256": "1bf834f5e10d60cc6124d74ed3c1dd38da646787fbf7872220b8b4068e476d4d"
            }
          ]
        },
        {
          "name": "uncrustify",
          "buildsystem": "cmake-ninja",
          "config-opts": [
            "-DCMAKE_BUILD_TYPE=Release"
          ],
          "builddir": true,
          "sources": [
            {
              "type": "archive",
              "url": "https://github.com/uncrustify/uncrustify/archive/uncrustify-0.76.0.tar.gz",
              "sha256": "32e2f95485a933fc5667880f1a09a964ae83132c235bb606abbb0a659453acb3"
            }
          ]
        }
      ]
    },
    {
      "name": "rome",
      "buildsystem": "simple",
      "build-commands": [
        "chmod +x rome",
        "cp rome /app/bin/rome"
      ],
      "sources": [
        {
          "type": "archive",
          "only-arches": [
            "aarch64"
          ],
          "url": "https://registry.npmjs.org/@rometools/cli-linux-arm64/-/cli-linux-arm64-12.0.0.tgz",
          "sha512": "9f62c983a78064435470917df708c37aa402affe3422a1942436d7ecdc2253546f0b2f9105936685c99201a28e73aac2a0b51c33d5b9abe1f88df9f86d67c904"
        },
        {
          "type": "archive",
          "only-arches": [
            "x86_64"
          ],
          "url": "https://registry.npmjs.org/@rometools/cli-linux-x64/-/cli-linux-x64-12.0.0.tgz",
          "sha512": "56e40ee1e3ab2a67eb2eb73c2b331a672a73de2d6b0fd157471c0e164ea16b5e8334757ed7b7514189bb8d1675a7e1eb5dd8c02584d273147f134df218b4e195"
        }
      ]
    },
    {
      "name": "Workbench",
      "buildsystem": "meson",
      "builddir": true,
      "config-opts": [
        "-Dprofile=default"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/sonnyp/Workbench.git",
          "tag": "v44.0",
          "commit": "fa40deb025adb1a78a6b853ec00ae4c9ce1678f4"
        }
      ]
    }
  ]
}